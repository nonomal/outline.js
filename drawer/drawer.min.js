!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Drawer=t()}(this,(function(){"use strict";const e=e=>Object.prototype.toString.apply(e),t=t=>"function"==typeof t||"[object Function]"===e(t),r=(e,r=300)=>!!t(e)&&setTimeout((()=>{e()}),r),s=r=>("[object Object]"===e(r)||"object"==typeof r||t(r))&&null!==r,n=t=>Array.isArray?Array.isArray(t):"[object Array]"===e(t),i=e=>{let t={};return null===e?null:(n(e)?t=Array.from(e):(t=Object.assign({},e),Object.keys(t).forEach((r=>t[r]=s(e[r])?i(e[r]):e[r]))),t)},o=e=>!!(s(e)&&e.nodeName&&e.tagName&&1===e.nodeType),a=t=>{return!(!s(t)||!(o(t)||(t=>!(!s(t)||"[object NodeList]"!==e(t)))(t)||(r=t,s(r)&&"[object DocumentFragment]"===e(r))||(t=>!(!s(t)||!("[object Text]"===e(t)||t.tagName&&3===t.nodeType)))(t)));var r},l=e=>"string"==typeof e,c=e=>!!l(e)&&e.replace(/(^\s+)|(\s+$)/g,""),u=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],d=e=>{let t,r,s;return!!l(e)&&(t=c(e).slice(0,1e3),r=/\s*<!doctype html>|<html\b[^>]*>|<body\b[^>]*>|<x-[^>]+>/i,s=new RegExp(u.map((e=>`<${e}\\b[^>]*>`)).join("|"),"i"),r.test(t)||s.test(t))},h=(e,t)=>{const r=new RegExp("(\\s|^)"+t+"(\\s|$)");let s,n;return!!o(e)&&(s=e.className,!!s&&(n=e.classList,n&&n.contains?e.classList.contains(t):!!r.exec(s)))},f=(e,t)=>{var r;let s,n;if(h(e,t))return!1;s=e.classList,null!==(r=s)&&void 0!==r&&r.add?t.indexOf(" ")>-1?t.split(" ").forEach((e=>{s.add(e)})):s.add(t):(n=e.className,n+=n.length>0?" "+t:t,e.className=n)},m=(e,t)=>{var r;let s,n=e.className;if(!n||!h(e,t))return!1;s=e.classList,null!==(r=s)&&void 0!==r&&r.remove?s.remove(t):(n=c(n.replace(t,"")),e.className=n)};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function y(e,t,r){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var s=t.length;return p(t,void 0!==r&&r<s?r:s)}return e(t,r)}function b(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const g=e=>e.replace(/<script[^>]*>.*?<\/script>/gi,""),v=(e,t)=>{const r=Object.prototype.hasOwnProperty;return e&&r.call(e,t)},$=(e,t)=>{if(!e||!s(t))return!1;Object.keys(t).forEach((r=>{const s=t[r];v(t,r)&&((e,t,r)=>{let s=e.tagName.toLowerCase();switch(t){case"style":e.style.cssText=r;break;case"value":"input"===s||"textarea"===s?e.value=r:e.setAttribute(t,r);break;case"htmlFor":e.setAttribute("for",r);break;case"className":f(e,r);break;case"innerHTML":e.innerHTML=r;break;case"innerText":e.innerText=r;break;default:e.setAttribute(t,r)}})(e,r,s)}))},_=(e,t,r)=>{const i=document.createDocumentFragment(),o=document.createElement(e),c=e=>a(e)||l(e),u=e=>{let t;if(!c(e))return!1;a(e)?t=e:l(e)&&(t=document.createTextNode(e)),i.appendChild(t)};return s(t)?$(o,t):n(t)&&t.every((e=>c(e)))?t.forEach((e=>{u(e)})):a(t)?u(t):l(t)&&u(document.createTextNode(t)),n(r)?r.forEach((e=>{u(e)})):u(r),o.appendChild(i),o};let w=2e3;const x=e=>{var t,r;return e?w=e:w+=1,t="--outline-zIndex",r=`${w}`,document.documentElement.style.setProperty(t,r),w},L=(e,t="")=>{const r=t.replace(/^>/i,"");return!!(t&&r&&e)&&(e.matches?e.matches(r):!!e.msMatchesSelector&&e.msMatchesSelector(r))},j=e=>e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode,A=["focusout","blur","focusin","focus","load","unload","mouseenter","mouseleave"],T=(e,t,r)=>{const s=A.indexOf(t)>-1;r._delegateListener&&delete(r=r._delegateListener)._delegateListener,function(e,t,r){const s=e._listeners;let n=-1;if(s.length<1)return!1;s.forEach(((e,s)=>{const i=e.fn;t===e.type&&(n=s,i===r&&(n=s))})),n>-1&&s.splice(n,1)}(e,t,r),e.removeEventListener(t,r,s)},N=function(e,t,r=!1){const s=l(e)?document.querySelector(e):e,n=s.childNodes,i=((e,t)=>{let r=e._listeners||[];return l(t)&&t&&(r=r.filter((e=>e.type===t))),r})(s,t);i.forEach((e=>{T(s,e.type,e.fn)})),(r||!0===t||1===arguments.length)&&s&&n&&n.forEach((e=>{o(e)&&N(e,t,r)}))},O=(e,r,s)=>{if(!t(s))return N(e,r),!1;T(e,r,s)},k=(e,t,r,s,n,i,o=!1)=>{const a=A.indexOf(r)>-1,l=function(a){const c=function(e){const t=e.target;return(r=t)&&3===r.nodeType?r.parentNode:r;var r}(a),u=((e,t,r,s)=>{const n=r||document;if(!e)return null;do{if(null!=t&&(t.startsWith(">")?e.parentNode===n&&L(e,t):L(e,t))||s&&e===n)return e;if(e===n)break}while(e=j(e))})(c,t,e);let d=i||e;a.delegateTarget=u,!0===i&&(d=n),u&&(!0===o&&O(e,r,l),s.call(d,a,n))};if(!e)return!1;e._listeners||(e._listeners=[]),e._listeners.push({el:e,selector:t,type:r,fn:l,data:n,context:i,capture:a}),s._delegateListener=l,e.addEventListener(r,l,a)},C=[],E=(e,t="icon")=>l(e)?((e,t="icon")=>{const r=/id="(.*?)"/,s=/^(\w+)-/;return C.find((n=>{const i=r.exec(n)[1];return s.exec(i)[1]===t&&i===("icon"===t?`${t}-${e}`:`${t}-icon-${e}`)}))})(e,t):y(b,C),S=(e="")=>{const t=document.body;let r=document.querySelector("#outline-icons"),s=[];(e=>{if(!e)return!1;n(e)&&e.length>0?e.forEach((e=>{-1===C.indexOf(e)&&l(e)&&C.push(e)})):l(e)&&C.push(e)})(e),s=E(),r?r.innerHTML=s.join(""):(r=document.createElement("div"),r.innerHTML=`<svg id="outline-icons" aria-hidden="true" style="position:absolute;display:none;width:0;height:0;overflow:hidden;">${s.join("")}</svg>`,t.insertBefore(r.firstChild,t.firstChild))},I=(e,t={})=>{const r="outline-icon",s=t.size||0,i=t.color||"",o=t.iconSet||"",a=n(s)?s[0]:s,c=n(s)?s[1]:s,u=s?`width:${a}px;height:${c}px;`:"",d=i?u+`color:${i}`:u,h=t.attrs||{},f=document.createElement("i");let m,p="",y="";return l(e)?((e=>{const t=new RegExp("^\\s*(?:<\\?xml[^>]*>\\s*)?(?:<\\!doctype svg[^>]*\\s*(?:\\[?(?:\\s*<![^>]*>\\s*)*\\]?)*[^>]*>\\s*)?<svg[^>]*>[^]*<\\/svg>\\s*$\\s*$","i");return l(e)&&t.test(e)})(e)?y=e:(p=o&&"icon"!==o?`xlink:href="#${o}-icon-${e}"`:`xlink:href="#icon-${e}"`,y=`<svg><use ${p}></use></svg>`),f.innerHTML=y,h.className?h.className=`${r} ${h.className}`:h.className=r,$(f,h),m=f.querySelector("svg"),$(m,{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",class:"outline-icon__svg",width:200,height:200,style:d}),f):null},M={},z=e=>v(M,e)&&M[e].length>0,H=(e,t=!0)=>t?z(e):(e=>{let t=z(e),r=e.lastIndexOf(".");for(;!t&&-1!==r;)r=(e=e.substring(0,r)).lastIndexOf("."),t=z(e);return t})(e),D=(t,r,s=!0)=>{const n=t=>{if(!z(t))return!1;M[t].forEach((t=>{const s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object BigInt64Array]","[object BigUint64Array]"].indexOf(e(r))>-1?r.toString():r;t.callback.call(t.context||t,s)}))},i=()=>{let e=t,r=t.lastIndexOf(".");for(;-1!==r;)e=e.substring(0,r),r=e.lastIndexOf("."),n(e);n(t),n("*")};if(!H(t))return!1;s?setTimeout(i,10):i()},F=(()=>{let e=0;return t=>(e+=1,t?t+"-"+e:"guid-"+e)})(),U=e=>{if(!v(M,e))return!1;delete M[e]},q=(e,t)=>{if(!H(e))return!1;t?(e=>{const t=Object.keys(M);if(!e||t.length<1)return!1;t.forEach((t=>{const r=M[t];let s;r.forEach(((t,n)=>{t.callback!==e&&t.token!==e||(s=t.topic,r.splice(-1,n))})),r.length<1&&U(s)}))})(t):U(e)};class B{constructor(e){this.name="component",this.attrs={},e&&this.initialize(e)}initialize(e){return this.attr(e).render().addListeners(),this}attr(e,t){const r=this.attrs;return l(e)?t&&v(r,e)?(r[e]=t,this):r[e]:s(e)?(n=r,i=e,Object.keys(i).forEach((e=>{v(i,e)&&(n[e]=i[e])})),this):0===arguments.length?r:this;var n,i}render(){return this}refresh(){return this}destroy(){return this.removeListeners(),this}reload(e){let t=this.attr();return e&&(t=this.attr(e)),this.destroy().initialize(t),this}$emit(e,t){return D(e,t),this}$on(e,r){return((e,r,s=null)=>{const n=F();let i="symbol"==typeof e?e.toString():e;t(r)&&(M[i]||(M[i]=[]),M[i].push({topic:i,callback:r,context:s,token:n}))})(e,r,this),this}$off(e,t){return q(e,t),this}addListeners(){return this}removeListeners(){return this}}const P=['<symbol id="outline-icon-close" viewBox="0 0 1024 1024"><path d="M536.96 491.648L310.592 265.344a32 32 0 1 0-45.248 45.248L491.584 536.96l-226.304 226.304a32 32 0 0 0 45.312 45.248l226.24-226.304 226.304 226.304a32 32 0 0 0 45.248-45.248L582.144 536.896l226.304-226.24a32 32 0 0 0-45.248-45.248L536.896 491.584z"></path></symbol>'];class R extends B{constructor(e){super(),this.name="drawer",this._default(),this.zIndex=0,e&&this.initialize(e)}_default(){return this.attrs=i(R.DEFAULTS),this.title="",this.closed=!1,this.$el=null,this.$modal=null,this.$header=null,this.$title=null,this.$close=null,this.$main=null,this.$footer=null,this.$overlay=null,this}initialize(e){let r;return this.attr(e),this.title=this.attr("title"),r=this.attr("created"),t(r)&&r.call(this),this.render().addListeners(),this}setTitle(e){return this.attr("title",e),this.title=e,this.$title.innerHTML=e,this}isClosed(){return this.closed}render(){const e=this.attr("mounted"),r=this.attr("size"),s=this.attr("placement"),n=this.attr("hasClose"),i=this.attr("hasOverlay"),o=this.attr("hasOffset"),a=this.attr("hasPadding"),l=this.attr("autoHeight"),c=this.attr("overflow"),u=this.attr("customClass");let d,h,m,p,y,b,g,v,$="outline-drawer__main";return S(P),this.zIndex=x(),p=_("h2",{className:"outline-drawer__title"},this.title),this.$title=p,n&&(y=_("div",{className:"outline-drawer__close"},((e,t={})=>I(e,t))("close",{iconSet:"outline",size:20})),this.$close=y),m=_("header",{className:"outline-drawer__header"},[p,y]),this.$header=m,"hidden"===c&&($+=" overflow-hidden"),b=_("div",{className:$}),this.$main=b,a||f(b,"outline-drawer_full"),g=_("footer",{className:"outline-drawer__footer"}),this.$footer=g,h=_("div",{className:`outline-drawer__modal outline-drawer_${s} outline-drawer_${r} outline-drawer_closed`},[m,b,g]),this.$modal=h,o&&f(h,"outline-drawer_offset"),l&&f(h,"outline-drawer_auto"),u&&f(h,u),i&&(v=_("div",{className:"outline-drawer__overlay"}),this.$overlay=v),d=_("div",{className:"outline-drawer"},[h,v]),this.$el=d,document.body.appendChild(d),t(e)&&e.call(this),this}erase(){return this.$main.innerHTML="",this}_paint(e){let r=null;return t(e)?r=e():a(e)?r=e:d(e)&&(r=((e,t)=>{const r=document.createDocumentFragment();if(!e||!d(e)&&!l(e)&&!o(e))return null;if(d(e)){const t=_("div");let s=[];return t.innerHTML=g(e),s=y(b,t.childNodes),s.forEach((e=>{r.appendChild(e)})),r}if(!l(t))return e.innerHTML;e.innerHTML=g(t)})(e)),r&&this.$main.appendChild(r),this}_remove(){return document.body.removeChild(this.$el),this}refresh(e){return this.erase()._paint(e),this}open(){const e=this.attr("afterOpened"),s=this.$modal;return f(this.$el,"outline-drawer_opened"),m(s,"outline-drawer_closed"),f(s,"outline-drawer_opened"),r((()=>{this.closed=!1,t(e)&&e.call(this)})),this}close(){const e=this.attr("afterClosed"),s=this.$modal;return m(s,"outline-drawer_opened"),f(s,"outline-drawer_closed"),r((()=>{m(this.$el,"outline-drawer_opened"),this.closed=!0,t(e)&&e.call(this)})),this}toggle(){const e=this.attr("afterToggle"),s=this.isClosed();return s?this.open():this.close(),t(e)&&r((()=>{e.call(this,s)})),this}destroy(){const e=this.attr("afterDestroy"),r=this.attr("beforeDestroy");let s=this.zIndex;return t(r)&&r.call(this),this.removeListeners()._remove()._default(),s-=1,x(s),this.zIndex=0,t(e)&&e.call(this),this}onClose(){return this.close(),this}addListeners(){const e=this.attr("hasClose"),t=this.attr("hasOverlay"),r=this.attr("closeOnClickModal"),s=this.$el;return e&&k(s,".outline-drawer__close","click",this.onClose,this,!0),t&&r&&k(s,".outline-drawer__overlay","click",this.onClose,this,!0),this}removeListeners(){const e=this.attr("hasClose"),t=this.attr("hasOverlay"),r=this.$el;return e||t?(O(r,"click",this.onClose),this):this}}return R.DEFAULTS=i({placement:"rtl",title:"标题",size:"regular",hasClose:!0,hasOverlay:!0,hasOffset:!1,hasPadding:!0,autoHeight:!0,closeOnClickModal:!0,overflow:"auto",created:null,mounted:null,afterClosed:null,afterOpened:null,afterScroll:null,beforeDestroy:null,afterDestroy:null,afterToggle:null}),R}));
//# sourceMappingURL=drawer.min.js.map
