!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Drawer=e()}(this,(function(){"use strict";const t=t=>Object.prototype.toString.apply(t),e=e=>"function"==typeof e||"[object Function]"===t(e),r=(t,r=300)=>!!e(t)&&setTimeout((()=>{t()}),r),s=r=>("[object Object]"===t(r)||"object"==typeof r||e(r))&&null!==r,n=e=>Array.isArray?Array.isArray(e):"[object Array]"===t(e),i=t=>{let e={};return null===t?null:(n(t)?e=Array.from(t):(e=Object.assign({},t),Object.keys(e).forEach((r=>e[r]=s(t[r])?i(t[r]):t[r]))),e)},o=t=>!!(s(t)&&t.nodeName&&t.tagName&&1===t.nodeType),l=e=>{return!(!s(e)||!(o(e)||(e=>!(!s(e)||"[object NodeList]"!==t(e)))(e)||(r=e,s(r)&&"[object DocumentFragment]"===t(r))||(e=>!(!s(e)||!("[object Text]"===t(e)||e.tagName&&3===e.nodeType)))(e)));var r},a=t=>"string"==typeof t,c=t=>!!a(t)&&t.replace(/(^\s+)|(\s+$)/g,""),h=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],u=t=>{let e,r,s;return!!a(t)&&(e=c(t).slice(0,1e3),r=/\s*<!doctype html>|<html\b[^>]*>|<body\b[^>]*>|<x-[^>]+>/i,s=new RegExp(h.map((t=>`<${t}\\b[^>]*>`)).join("|"),"i"),r.test(e)||s.test(e))},d=(t,e)=>{const r=new RegExp("(\\s|^)"+e+"(\\s|$)");let s,n;return!!o(t)&&(s=t.className,!!s&&(n=t.classList,n&&n.contains?t.classList.contains(e):!!r.exec(s)))},f=(t,e)=>{var r;let s,n;if(d(t,e))return!1;s=t.classList,null!==(r=s)&&void 0!==r&&r.add?e.indexOf(" ")>-1?e.split(" ").forEach((t=>{s.add(t)})):s.add(e):(n=t.className,n+=n.length>0?" "+e:e,t.className=n)},m=(t,e)=>{var r;let s,n=t.className;if(!n||!d(t,e))return!1;s=t.classList,null!==(r=s)&&void 0!==r&&r.remove?s.remove(e):(n=c(n.replace(e,"")),t.className=n)};function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=Array(e);r<e;r++)s[r]=t[r];return s}function y(t,e,r){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var s=e.length;return p(e,void 0!==r&&r<s?r:s)}return t(e,r)}function g(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const b=t=>t.replace(/<script[^>]*>.*?<\/script>/gi,""),v=(t,e)=>{const r=Object.prototype.hasOwnProperty;return t&&r.call(t,e)},$=(t,e)=>{if(!t||!s(e))return!1;Object.keys(e).forEach((r=>{const s=e[r];v(e,r)&&((t,e,r)=>{let s=t.tagName.toLowerCase();switch(e){case"style":t.style.cssText=r;break;case"value":"input"===s||"textarea"===s?t.value=r:t.setAttribute(e,r);break;case"htmlFor":t.setAttribute("for",r);break;case"className":f(t,r);break;case"innerHTML":t.innerHTML=r;break;case"innerText":t.innerText=r;break;default:t.setAttribute(e,r)}})(t,r,s)}))},w=(t,e,r)=>{const i=document.createDocumentFragment(),o=document.createElement(t),c=t=>l(t)||a(t),h=t=>{let e;if(!c(t))return!1;l(t)?e=t:a(t)&&(e=document.createTextNode(t)),i.appendChild(e)};return s(e)?$(o,e):n(e)&&e.every((t=>c(t)))?e.forEach((t=>{h(t)})):l(e)?h(e):a(e)&&h(document.createTextNode(e)),n(r)?r.forEach((t=>{h(t)})):h(r),o.appendChild(i),o};let _=2e3;const x=t=>{var e,r;return t?_=t:_+=1,e="--outline-zIndex",r=`${_}`,document.documentElement.style.setProperty(e,r),_},L=(t,e="")=>{const r=e.replace(/^>/i,"");return!!(e&&r&&t)&&(t.matches?t.matches(r):!!t.msMatchesSelector&&t.msMatchesSelector(r))},j=t=>t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode,A=["focusout","blur","focusin","focus","load","unload","mouseenter","mouseleave"],O=(t,e,r)=>{const s=A.indexOf(e)>-1;r._delegateListener&&delete(r=r._delegateListener)._delegateListener,function(t,e,r){const s=t._listeners;let n=-1;if(s.length<1)return!1;s.forEach(((t,s)=>{const i=t.fn;e===t.type&&(n=s,i===r&&(n=s))})),n>-1&&s.splice(n,1)}(t,e,r),t.removeEventListener(e,r,s)},T=function(t,e,r=!1){const s=a(t)?document.querySelector(t):t,n=s.childNodes,i=((t,e)=>{let r=t._listeners||[];return a(e)&&e&&(r=r.filter((t=>t.type===e))),r})(s,e);i.forEach((t=>{O(s,t.type,t.fn)})),(r||!0===e||1===arguments.length)&&s&&n&&n.forEach((t=>{o(t)&&T(t,e,r)}))},N=(t,r,s)=>{if(!e(s))return T(t,r),!1;O(t,r,s)},k=(t,e,r,s,n,i,o=!1)=>{const l=A.indexOf(r)>-1,a=function(l){const c=function(t){const e=t.target;return(r=e)&&3===r.nodeType?r.parentNode:r;var r}(l),h=((t,e,r,s)=>{const n=r||document;if(!t)return null;do{if(null!=e&&(e.startsWith(">")?t.parentNode===n&&L(t,e):L(t,e))||s&&t===n)return t;if(t===n)break}while(t=j(t))})(c,e,t);let u=i||t;l.delegateTarget=h,!0===i&&(u=n),h&&(!0===o&&N(t,r,a),s.call(u,l,n))};if(!t)return!1;t._listeners||(t._listeners=[]),t._listeners.push({el:t,selector:e,type:r,fn:a,data:n,context:i,capture:l}),s._delegateListener=a,t.addEventListener(r,a,l)},E=[],C=(t,e="icon")=>a(t)?((t,e="icon")=>{const r=/id="(.*?)"/,s=/^(\w+)-/;return E.find((n=>{const i=r.exec(n)[1];return s.exec(i)[1]===e&&i===("icon"===e?`${e}-${t}`:`${e}-icon-${t}`)}))})(t,e):y(g,E),S=(t="")=>{const e=document.body;let r=document.querySelector("#outline-icons"),s=[];(t=>{if(!t)return!1;n(t)&&t.length>0?t.forEach((t=>{-1===E.indexOf(t)&&a(t)&&E.push(t)})):a(t)&&E.push(t)})(t),s=C(),r?r.innerHTML=s.join(""):(r=document.createElement("div"),r.innerHTML=`<svg id="outline-icons" aria-hidden="true" style="position:absolute;display:none;width:0;height:0;overflow:hidden;">${s.join("")}</svg>`,e.insertBefore(r.firstChild,e.firstChild))},I=(t,e={})=>{const r="outline-icon",s=e.size||0,i=e.color||"",o=e.iconSet||"",l=n(s)?s[0]:s,c=n(s)?s[1]:s,h=s?`width:${l}px;height:${c}px;`:"",u=i?h+`color:${i}`:h,d=e.attrs||{},f=document.createElement("i");let m,p="",y="";return a(t)?((t=>{const e=new RegExp("^\\s*(?:<\\?xml[^>]*>\\s*)?(?:<\\!doctype svg[^>]*\\s*(?:\\[?(?:\\s*<![^>]*>\\s*)*\\]?)*[^>]*>\\s*)?<svg[^>]*>[^]*<\\/svg>\\s*$\\s*$","i");return a(t)&&e.test(t)})(t)?y=t:(p=o&&"icon"!==o?`xlink:href="#${o}-icon-${t}"`:`xlink:href="#icon-${t}"`,y=`<svg><use ${p}></use></svg>`),f.innerHTML=y,d.className?d.className=`${r} ${d.className}`:d.className=r,$(f,d),m=f.querySelector("svg"),$(m,{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",class:"outline-icon__svg",width:200,height:200,style:u}),f):null},M={},z=t=>v(M,t)&&M[t].length>0,H=(t,e=!0)=>e?z(t):(t=>{let e=z(t),r=t.lastIndexOf(".");for(;!e&&-1!==r;)r=(t=t.substring(0,r)).lastIndexOf("."),e=z(t);return e})(t),D=(e,r,s=!0)=>{const n=e=>{if(!z(e))return!1;M[e].forEach((e=>{const s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object BigInt64Array]","[object BigUint64Array]"].indexOf(t(r))>-1?r.toString():r;e.callback.call(e.context||e,s)}))},i=()=>{let t=e,r=e.lastIndexOf(".");for(;-1!==r;)t=t.substring(0,r),r=t.lastIndexOf("."),n(t);n(e),n("*")};if(!H(e))return!1;s?setTimeout(i,10):i()},F=(()=>{let t=0;return e=>(t+=1,e?e+"-"+t:"guid-"+t)})(),U=t=>{if(!v(M,t))return!1;delete M[t]},q=(t,e)=>{if(!H(t))return!1;e?(t=>{const e=Object.keys(M);if(!t||e.length<1)return!1;e.forEach((e=>{const r=M[e];let s;r.forEach(((e,n)=>{e.callback!==t&&e.token!==t||(s=e.topic,r.splice(-1,n))})),r.length<1&&U(s)}))})(e):U(t)};class P{constructor(){return this.plugins=[],this.instances=[],this}find(t,e="plugin"){return("plugin"===e?this.plugins:this.instances).find((e=>e.name===t))}exists(t,e="plugin"){return!!this.find(t,e)}use(t,e){return this.add(t).load(null==t?void 0:t.name,e),this}add(t){const e=t.name;if(console.log("add",e),!e)throw new Error("Plugin name required");return this.exists(e)||this.plugins.push(t),this}remove(t){const e=this.plugins,r=this.find(t);return r&&e.splice(e.indexOf(r),1),this}load(t,e){const r=this.find(t);let s=this.find(t,"instance");return console.log("plugin",r),console.log("instance",s),!r||s||(s=new r(e),this.instances.push(s)),this}unload(t){const e=this.instances,r=this.find(t,"instance");return r?(r.destroy(),e.splice(e.indexOf(r),1),this):this}clear(){return this.plugins.map((t=>t.name)).forEach((t=>{this.unload(t),this.remove(t)})),this}}class B{constructor(t){this.name="component",this.attrs={},this.plugins=new P,t&&this.initialize(t)}initialize(t){return this.attr(t).render().addListeners(),this}attr(t,e){const r=this.attrs;return a(t)?e&&v(r,t)?(r[t]=e,this):r[t]:s(t)?(n=r,i=t,Object.keys(i).forEach((t=>{v(i,t)&&(n[t]=i[t])})),this):0===arguments.length?r:this;var n,i}render(){return this}refresh(){return this}destroy(){return this.removeListeners(),this}reload(t){let e=this.attr();return t&&(e=this.attr(t)),this.destroy().initialize(e),this}$emit(t,e){return D(t,e),this}$on(t,r){return((t,r,s=null)=>{const n=F();let i="symbol"==typeof t?t.toString():t;e(r)&&(M[i]||(M[i]=[]),M[i].push({topic:i,callback:r,context:s,token:n}))})(t,r,this),this}$off(t,e){return q(t,e),this}addListeners(){return this}removeListeners(){return this}}const R=['<symbol id="outline-icon-close" viewBox="0 0 1024 1024"><path d="M536.96 491.648L310.592 265.344a32 32 0 1 0-45.248 45.248L491.584 536.96l-226.304 226.304a32 32 0 0 0 45.312 45.248l226.24-226.304 226.304 226.304a32 32 0 0 0 45.248-45.248L582.144 536.896l226.304-226.24a32 32 0 0 0-45.248-45.248L536.896 491.584z"></path></symbol>'];class W extends B{constructor(t){super(),this.name="drawer",this._default(),this.zIndex=0,t&&this.initialize(t)}_default(){return this.attrs=i(W.DEFAULTS),this.title="",this.closed=!1,this.$el=null,this.$modal=null,this.$header=null,this.$title=null,this.$close=null,this.$main=null,this.$footer=null,this.$overlay=null,this}initialize(t){let r;return this.attr(t),this.title=this.attr("title"),r=this.attr("created"),e(r)&&r.call(this),this.render().addListeners(),this}setTitle(t){return this.attr("title",t),this.title=t,this.$title.innerHTML=t,this}isClosed(){return this.closed}render(){const t=this.attr("mounted"),r=this.attr("size"),s=this.attr("placement"),n=this.attr("hasClose"),i=this.attr("hasOverlay"),o=this.attr("hasOffset"),l=this.attr("hasPadding"),a=this.attr("autoHeight"),c=this.attr("overflow"),h=this.attr("customClass");let u,d,m,p,y,g,b,v,$="outline-drawer__main";return S(R),this.zIndex=x(),p=w("h2",{className:"outline-drawer__title"},this.title),this.$title=p,n&&(y=w("div",{className:"outline-drawer__close"},((t,e={})=>I(t,e))("close",{iconSet:"outline",size:20})),this.$close=y),m=w("header",{className:"outline-drawer__header"},[p,y]),this.$header=m,"hidden"===c&&($+=" overflow-hidden"),g=w("div",{className:$}),this.$main=g,l||f(g,"outline-drawer_full"),b=w("footer",{className:"outline-drawer__footer"}),this.$footer=b,d=w("div",{className:`outline-drawer__modal outline-drawer_${s} outline-drawer_${r} outline-drawer_closed`},[m,g,b]),this.$modal=d,o&&f(d,"outline-drawer_offset"),a&&f(d,"outline-drawer_auto"),h&&f(d,h),i&&(v=w("div",{className:"outline-drawer__overlay"}),this.$overlay=v),u=w("div",{className:"outline-drawer"},[d,v]),this.$el=u,document.body.appendChild(u),e(t)&&t.call(this),this}erase(){return this.$main.innerHTML="",this}_paint(t){let r=null;return e(t)?r=t():l(t)?r=t:u(t)&&(r=((t,e)=>{const r=document.createDocumentFragment();if(!t||!u(t)&&!a(t)&&!o(t))return null;if(u(t)){const e=w("div");let s=[];return e.innerHTML=b(t),s=y(g,e.childNodes),s.forEach((t=>{r.appendChild(t)})),r}if(!a(e))return t.innerHTML;t.innerHTML=b(e)})(t)),r&&this.$main.appendChild(r),this}_remove(){return document.body.removeChild(this.$el),this}refresh(t){return this.erase()._paint(t),this}open(){const t=this.attr("afterOpened"),s=this.$modal;return f(this.$el,"outline-drawer_opened"),m(s,"outline-drawer_closed"),f(s,"outline-drawer_opened"),r((()=>{this.closed=!1,e(t)&&t.call(this)})),this}close(){const t=this.attr("afterClosed"),s=this.$modal;return m(s,"outline-drawer_opened"),f(s,"outline-drawer_closed"),r((()=>{m(this.$el,"outline-drawer_opened"),this.closed=!0,e(t)&&t.call(this)})),this}toggle(){const t=this.attr("afterToggle"),s=this.isClosed();return s?this.open():this.close(),e(t)&&r((()=>{t.call(this,s)})),this}destroy(){const t=this.attr("afterDestroy"),r=this.attr("beforeDestroy");let s=this.zIndex;return e(r)&&r.call(this),this.removeListeners()._remove()._default(),s-=1,x(s),this.zIndex=0,e(t)&&t.call(this),this}onClose(){return this.close(),this}addListeners(){const t=this.attr("hasClose"),e=this.attr("hasOverlay"),r=this.attr("closeOnClickModal"),s=this.$el;return t&&k(s,".outline-drawer__close","click",this.onClose,this,!0),e&&r&&k(s,".outline-drawer__overlay","click",this.onClose,this,!0),this}removeListeners(){const t=this.attr("hasClose"),e=this.attr("hasOverlay"),r=this.$el;return t||e?(N(r,"click",this.onClose),this):this}}return W.DEFAULTS=i({placement:"rtl",title:"标题",size:"regular",hasClose:!0,hasOverlay:!0,hasOffset:!1,hasPadding:!0,autoHeight:!0,closeOnClickModal:!0,overflow:"auto",created:null,mounted:null,afterClosed:null,afterOpened:null,afterScroll:null,beforeDestroy:null,afterDestroy:null,afterToggle:null}),W}));
//# sourceMappingURL=drawer.min.js.map
